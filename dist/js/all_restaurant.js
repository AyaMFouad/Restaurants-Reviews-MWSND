class DBHelper{static get DATABASE_URL(){return"http://localhost:1337"}static get RESTAURANT_URL(){return"http://localhost:1337/restaurants"}static get REVIEWS_URL(){return"http://localhost:1337/reviews/?restaurant_id="}static openDatabase(){return navigator.serviceWorker?idb.open("restaurants-db",1,function(e){e.createObjectStore("restaurants",{keyPath:"id"}).createIndex("rest-id","id"),e.createObjectStore("reviews",{keyPath:"id",autoIncrement:!0}).createIndex("restaurant_id","restaurant_id",{unique:!1}),e.createObjectStore("sync-reviews",{keyPath:"id",autoIncrement:!0}).createIndex("restaurant_id","restaurant_id",{unique:!1})}):(console.log("Browser doesn't support Service Workers"),Promise.resolve())}static fetchRestaurants(e){DBHelper.openDatabase().then(function(e){return e?e.transaction("restaurants","readwrite").objectStore("restaurants").getAll():void 0}).then(function(t){0!==t.length&&e(null,t)}),fetch(DBHelper.RESTAURANT_URL).then(function(t){200===t.status?t.json().then(function(t){DBHelper.openDatabase().then(function(e){if(e){let n=e.transaction("restaurants","readwrite"),r=n.objectStore("restaurants");return t.forEach(function(e){r.put(e)}),n.complete}}),e(null,t)}):console.log("Fetch Issue - Status Code: "+t.status)}).catch(function(e){console.log("Fetch Error: ",e)})}static fetchRestaurantById(e,t){DBHelper.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.find(t=>t.id==e);n?t(null,n):t("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(e,t){DBHelper.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.filter(t=>t.cuisine_type==e);t(null,n)}})}static fetchRestaurantByNeighborhood(e,t){DBHelper.fetchRestaurants((n,r)=>{if(n)t(n,null);else{const n=r.filter(t=>t.neighborhood==e);t(null,n)}})}static fetchRestaurantByCuisineAndNeighborhood(e,t,n){DBHelper.fetchRestaurants((r,a)=>{if(r)n(r,null);else{let r=a;"all"!=e&&(r=r.filter(t=>t.cuisine_type==e)),"all"!=t&&(r=r.filter(e=>e.neighborhood==t)),n(null,r)}})}static fetchNeighborhoods(e){DBHelper.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].neighborhood),r=t.filter((e,n)=>t.indexOf(e)==n);e(null,r)}})}static fetchCuisines(e){DBHelper.fetchRestaurants((t,n)=>{if(t)e(t,null);else{const t=n.map((e,t)=>n[t].cuisine_type),r=t.filter((e,n)=>t.indexOf(e)==n);e(null,r)}})}static fetchReviews(e,t){DBHelper.openDatabase().then(function(t){if(t){return t.transaction("reviews","readwrite").objectStore("reviews").index("restaurant_id").getAll(parseInt(e))}}).then(function(e){0!==e.length&&t(null,e)}),fetch(`${DBHelper.REVIEWS_URL}${e}`).then(e=>e.json()).then(e=>{DBHelper.openDatabase().then(function(t){if(t){let n=t.transaction("reviews","readwrite"),r=n.objectStore("reviews");return e.forEach(function(e){r.put(e)}),n.complete}}),t(null,e)}).catch(e=>t(`Request failed. Returned ${e}`,null))}static fetchTmpReviews(e,t){DBHelper.openDatabase().then(function(t){if(t){return t.transaction("sync-reviews","readonly").objectStore("sync-reviews").index("restaurant_id").getAll(parseInt(e))}}).then(function(e){0!==e.length&&t(null,e)})}static postReview(e){return DBHelper.openDatabase().then(function(t){if(t){let n=t.transaction("sync-reviews","readwrite");return n.objectStore("sync-reviews").put(e),n.complete}}).then(function(){return Promise.resolve()}).catch(function(e){return console.log(e),Promise.resolve()})}static toggleFavorite(e,t){return DBHelper.openDatabase().then(function(e){if(e){return e.transaction("restaurants","readwrite").objectStore("restaurants").index("rest-id").openCursor()}}).then(function n(r){if(e=+e,r){if(r.value.id===e){var a=r.value;a.is_favorite=t,r.update(a).onsuccess=function(){}}return r.continue().then(n)}}).then(function(){fetch(`http://localhost:1337/restaurants/${e}/?is_favorite=${t}`,{method:"PUT"}).then(e=>e.json()).catch(e=>{console.log("Error fetching is_favorite: "+e)})}).then(function(){return Promise.resolve()})}static urlForRestaurant(e){return`./restaurant.html?id=${e.id}`}static imageUrlForRestaurant(e){return`/img/${e.photograph}.webp`}static imageResponsiveUrlForRestaurant(e){return`/img_responsive/${e.id}-320.webp 320w,\n        /img_responsive/${e.id}-480.webp 480w,\n        /img_responsive/${e.id}-640.webp 640w,\n        /img_responsive/${e.id}-800.webp 800w`}static mapMarkerForRestaurant(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:DBHelper.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}}let restaurant;var map;const photographAlts={1:"Sereval groups of people having quality time at a restaurant.",2:"A lovely margeritta pizza",3:"An empty restaurant setting which has heaters",4:"A corner shot of the outside of the restaurat.",5:"A crowded restaurant and staff serving food from behind the bar.",6:"Restaurant with wooden tables, charis, and a US flag as a wall decoration",7:"a dog watching from the outside of a crowded burger shop, accompanied by two men.",8:"Close up of the dutch restaurant logo beside a flowering tree",9:"Black and white picture of people eating at an asian restaurat.",10:"Empty restaurant's white chairs, walls and ceilings."};window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})}),callMap=document.getElementById("mapToggle").addEventListener("click",function(e){"block"===document.getElementById("map-container").style.display?(document.getElementById("map-container").style.display="none",window.initMap()):document.getElementById("map-container").style.display="block"}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),toggleFavorite=(e=>{const t=document.getElementById("isFavorite"),n=t.classList.contains("far");t.classList.toggle("far"),t.classList.toggle("fas"),DBHelper.toggleFavorite(e,n)}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name;const t=document.getElementById("isFavorite"),n="true"==e.is_favorite?"fas":"far";t.classList.remove("far"),t.classList.add(`${n}`),"true"==e.is_favorite?t.setAttribute("aria-label",`Unmark ${e.name} as favorite`):t.setAttribute("aria-label",`Mark ${e.name} as favorite`),document.getElementById("restaurant-address").innerHTML=e.address;const r=document.getElementById("restaurant-img");r.className="restaurant-img",r.src=DBHelper.imageUrlForRestaurant(e),r.srcset=DBHelper.imageResponsiveUrlForRestaurant(e),r.alt=photographAlts[e.id],document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");t.innerHTML="";for(let n in e){const r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);const i=document.createElement("td");i.innerHTML=e[n],r.appendChild(i),t.appendChild(r)}}),fillReviewsHTML=((e=self.restaurant.id)=>{DBHelper.fetchReviews(e,(e,t)=>{if(e)console.log(e);else{const e=document.getElementById("reviews-container");e.innerHTML='<ul id="reviews-list"></ul>';const n=document.createElement("h2");if(n.innerHTML="Reviews",n.tabIndex="0",e.appendChild(n),!t){const t=document.createElement("p");return t.innerHTML="No reviews yet!",void e.appendChild(t)}{const n=document.getElementById("reviews-list");t.forEach(e=>{n.appendChild(createReviewHTML(e))}),e.appendChild(n),fillTmpReviewsHTML()}}})}),window.addEventListener("online",function(e){navigator.serviceWorker.ready.then(function(e){e.sync.register("myFirstSync")})},!1),fillTmpReviewsHTML=((e=self.restaurant.id)=>{DBHelper.fetchTmpReviews(e,(e,t)=>{if(e)console.log(e);else{const e=document.getElementById("reviews-list");0===document.getElementsByClassName("tmp").length&&t.forEach(t=>{e.appendChild(createTmpReviewHTML(t))})}})}),addReview=(()=>{const e={restaurant_id:self.restaurant.id,name:document.getElementById("name").value,createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),rating:+document.getElementById("rating").value,comments:document.getElementById("comments").value},t=document.getElementById("reviews-list");t.insertBefore(createReviewHTML(e),t.childNodes[0]),navigator.onLine||alert("You are currently offline. Your review will be posted once you are online again. Thank you for reviewing!"),DBHelper.postReview(e).then(function(){navigator.serviceWorker.ready.then(function(e){e.sync.register("myFirstSync"),location.reload()})}).then(function(){fillReviewsHTML()}).then(function(){fillTmpReviewsHTML()}).catch(function(e){console.error(e)})}),document.getElementById("review-form").addEventListener("submit",function(e){e.preventDefault(),addReview()}),createReviewHTML=(e=>{const t=document.createElement("li");t.tabIndex="0";const n=document.createElement("h5"),r=new Date(e.createdAt);n.innerHTML=r.toDateString(),t.appendChild(n);const a=document.createElement("h1");a.innerHTML=e.name,t.appendChild(a);const i=document.createElement("i");i.innerHTML=`Rating: ${e.rating}`,i.style.backgroundColor=5===e.rating?"green":e.rating>2?"orange":"red",t.appendChild(i);const s=document.createElement("p");s.innerHTML=e.comments,t.appendChild(s);const o=`${e.name} said ${e.comments} and rated the restaurant ${e.rating} out of 5`;return t.setAttribute("aria-label",o),t}),createTmpReviewHTML=(e=>{const t=document.createElement("li");t.setAttribute("class","tmp");const n=document.createElement("div");n.setAttribute("class","review-header"),t.appendChild(n);const r=document.createElement("h1");r.setAttribute("class","reviewName"),r.innerHTML=e.name,n.appendChild(r);const a=document.createElement("h5");a.setAttribute("class","reviewDate");a.innerHTML=new Date(e.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),n.appendChild(a);const i=document.createElement("i");i.innerHTML=`Rating: ${e.rating}`,i.setAttribute("class","reviewRating"),i.style.backgroundColor=5===e.rating?"green":e.rating>2?"orange":"red",t.appendChild(i);const s=document.createElement("p");return s.innerHTML=e.comments,s.setAttribute("class","reviewComment"),t.appendChild(s),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=t.querySelectorAll("li");for(element of n)element.removeAttribute("aria-current");const r=document.createElement("li");r.setAttribute("aria-current","page"),2!==t.childElementCount&&(r.innerHTML=e.name,t.appendChild(r))}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null});const fav=document.getElementById("isFavorite");fav.addEventListener("click",()=>{toggleFavorite(self.restaurant.id)}),fav.addEventListener("keydown",e=>{13===e.keyCode&&toggleFavorite(self.restaurant.id)}),navigator.serviceWorker&&navigator.serviceWorker.register("sw.js").then(()=>console.log("Passed Test")),registerServiceWorker=(()=>{navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").catch(function(){console.log("Something went wrong. ServiceWorker not registered")})}),registerServiceWorker();var vue=new Vue({el:"#app",data:{formOpen:!1,review:{name:"",rating:"",comments:""}},methods:{resetForm:function(){this.review={name:"",rating:"",comments:""}},cancel:function(){this.formOpen=!1,this.resetForm()}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLmpzIiwicmVzdGF1cmFudF9pbmZvLmpzIiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyLmpzIiwiZm9ybS5qcyJdLCJuYW1lcyI6WyJEQkhlbHBlciIsIkRBVEFCQVNFX1VSTCIsIlJFU1RBVVJBTlRfVVJMIiwiUkVWSUVXU19VUkwiLCJbb2JqZWN0IE9iamVjdF0iLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwiaWRiIiwib3BlbiIsInVwZ3JhZGVEYiIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsImNyZWF0ZUluZGV4IiwiYXV0b0luY3JlbWVudCIsInVuaXF1ZSIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImNhbGxiYWNrIiwib3BlbkRhdGFiYXNlIiwidGhlbiIsImRiIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsImdldEFsbCIsInJlc3RhdXJhbnRzIiwibGVuZ3RoIiwiZmV0Y2giLCJyZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJ0eCIsInN0b3JlUmVzdGF1cmFudHMiLCJmb3JFYWNoIiwicmVzdGF1cmFudCIsInB1dCIsImNvbXBsZXRlIiwiY2F0Y2giLCJlcnIiLCJpZCIsImZldGNoUmVzdGF1cmFudHMiLCJlcnJvciIsImZpbmQiLCJyIiwiY3Vpc2luZSIsInJlc3VsdHMiLCJmaWx0ZXIiLCJjdWlzaW5lX3R5cGUiLCJuZWlnaGJvcmhvb2QiLCJuZWlnaGJvcmhvb2RzIiwibWFwIiwidiIsImkiLCJ1bmlxdWVOZWlnaGJvcmhvb2RzIiwiaW5kZXhPZiIsImN1aXNpbmVzIiwidW5pcXVlQ3Vpc2luZXMiLCJpbmRleCIsInBhcnNlSW50IiwicmV2aWV3cyIsInN0b3JlUmV2aWV3cyIsInJldmlldyIsInJlc3RhdXJhbnRJZCIsInRvZ2dsZVZhbHVlIiwib3BlbkN1cnNvciIsInVwZGF0ZUZhdm9yaXRlIiwiY3Vyc29yIiwidmFsdWUiLCJ1cGRhdGVEYXRhIiwiaXNfZmF2b3JpdGUiLCJ1cGRhdGUiLCJvbnN1Y2Nlc3MiLCJjb250aW51ZSIsIm1ldGhvZCIsInBob3RvZ3JhcGgiLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJsYXRsbmciLCJ0aXRsZSIsIm5hbWUiLCJ1cmwiLCJ1cmxGb3JSZXN0YXVyYW50IiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCIsInBob3RvZ3JhcGhBbHRzIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCJ3aW5kb3ciLCJpbml0TWFwIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsInNlbGYiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiem9vbSIsImNlbnRlciIsInNjcm9sbHdoZWVsIiwiZmlsbEJyZWFkY3J1bWIiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwiY2FsbE1hcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInN0eWxlIiwiZGlzcGxheSIsImdldFBhcmFtZXRlckJ5TmFtZSIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJ0b2dnbGVGYXZvcml0ZSIsInJlc3RJZCIsImVsZW1lbnQiLCJzZXRUb2dnbGUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInRvZ2dsZSIsImlubmVySFRNTCIsImZhdm9yaXRlIiwiaXNGYXZvcml0ZSIsInJlbW92ZSIsImFkZCIsInNldEF0dHJpYnV0ZSIsImFkZHJlc3MiLCJpbWFnZSIsImNsYXNzTmFtZSIsInNyYyIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsInNyY3NldCIsImltYWdlUmVzcG9uc2l2ZVVybEZvclJlc3RhdXJhbnQiLCJhbHQiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsImZpbGxSZXZpZXdzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJrZXkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiZGF5IiwiYXBwZW5kQ2hpbGQiLCJ0aW1lIiwiZmV0Y2hSZXZpZXdzIiwiY29udGFpbmVyIiwidGFiSW5kZXgiLCJub1Jldmlld3MiLCJ1bCIsImNyZWF0ZVJldmlld0hUTUwiLCJmaWxsVG1wUmV2aWV3c0hUTUwiLCJlIiwicmVhZHkiLCJzd1JlZ2lzdHJhdGlvbiIsInN5bmMiLCJyZWdpc3RlciIsImZldGNoVG1wUmV2aWV3cyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjcmVhdGVUbXBSZXZpZXdIVE1MIiwiYWRkUmV2aWV3IiwicmVzdGF1cmFudF9pZCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJnZXRUaW1lIiwidXBkYXRlZEF0IiwicmF0aW5nIiwiY29tbWVudHMiLCJpbnNlcnRCZWZvcmUiLCJjaGlsZE5vZGVzIiwib25MaW5lIiwiYWxlcnQiLCJwb3N0UmV2aWV3IiwibG9jYXRpb24iLCJyZWxvYWQiLCJwcmV2ZW50RGVmYXVsdCIsImxpIiwiZGF0ZSIsIm15X2RhdGUiLCJ0b0RhdGVTdHJpbmciLCJiYWNrZ3JvdW5kQ29sb3IiLCJsYWJlbCIsImRpdiIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJ5ZWFyIiwibW9udGgiLCJicmVhZGNydW1iIiwiYnJlYWRjcnVtYkVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUF0dHJpYnV0ZSIsImNoaWxkRWxlbWVudENvdW50IiwiaHJlZiIsInJlcGxhY2UiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZmF2Iiwia2V5Q29kZSIsInJlZ2lzdGVyU2VydmljZVdvcmtlciIsInZ1ZSIsIlZ1ZSIsImVsIiwiZGF0YSIsImZvcm1PcGVuIiwibWV0aG9kcyIsInJlc2V0Rm9ybSIsInRoaXMiLCJjYW5jZWwiXSwibWFwcGluZ3MiOiJNQUdNQSxTQU1KQywwQkFFRSxNQUFRLHdCQUVWQyw0QkFFQSxNQUFRLG9DQUdWQyx5QkFFRSxNQUFRLGdEQU1WQyxzQkFJRSxPQUFLQyxVQUFVQyxjQUtSQyxJQUFJQyxLQUFLLGlCQUFrQixFQUFHLFNBQVVDLEdBQ3RC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QUVmRCxVQUFVQyxjQUFjNEosU0FBUyxVQUFVNUgsTUFBTSxXQUMvQ3ZCLFFBQVFDLElBQUksMERBSWhCNkwsd0JDYkYsSUFBSUMsSUFBTSxJQUFJQyxLQUNaQyxHQUFJLE9BQ0pDLE1BQ0VDLFVBQVUsRUFDVnBKLFFBQ0VvQixLQUFNLEdBQ04wRixPQUFRLEdBQ1JDLFNBQVMsS0FHYnNDLFNBQ0VDLFVBQVcsV0FDVEMsS0FBS3ZKLFFBQ0hvQixLQUFNLEdBQ04wRixPQUFRLEdBQ1JDLFNBQVMsS0FHYnlDLE9BQVEsV0FDTkQsS0FBS0gsVUFBVyxFQUNoQkcsS0FBS0QiLCJmaWxlIjoiYWxsX3Jlc3RhdXJhbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29tbW9uIGRhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnMuXHJcbiAqL1xyXG5jbGFzcyBEQkhlbHBlciB7XHJcblxyXG4gIC8qKlxyXG4gICAqIERhdGFiYXNlIFVSTC5cclxuICAgKiBDaGFuZ2UgdGhpcyB0byByZXN0YXVyYW50cy5qc29uIGZpbGUgbG9jYXRpb24gb24geW91ciBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XHJcbiAgICBjb25zdCBwb3J0ID0gMTMzNztcclxuICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YDtcclxuICB9XHJcbiAgc3RhdGljIGdldCBSRVNUQVVSQU5UX1VSTCgpIHtcclxuICBjb25zdCBwb3J0ID0gMTMzNztcclxuICByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS9yZXN0YXVyYW50c2A7XHJcbn1cclxuXHJcbnN0YXRpYyBnZXQgUkVWSUVXU19VUkwoKSB7XHJcbiAgY29uc3QgcG9ydCA9IDEzMzc7XHJcbiAgcmV0dXJuIGBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vcmV2aWV3cy8/cmVzdGF1cmFudF9pZD1gO1xyXG59XHJcblxyXG4vLyBJREIgY3JlYXRpb25cclxuXHJcblxyXG5zdGF0aWMgb3BlbkRhdGFiYXNlICgpIHtcclxuXHJcbiAgLy8gSWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHNlcnZpY2Ugd29ya2VyLFxyXG4gIC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaGF2aW5nIGEgZGF0YWJhc2VcclxuICBpZiAoIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgQnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgU2VydmljZSBXb3JrZXJzYCk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gaWRiLm9wZW4oJ3Jlc3RhdXJhbnRzLWRiJywgMSwgZnVuY3Rpb24gKHVwZ3JhZGVEYikge1xyXG4gICAgdmFyIHN0b3JlUmVzdGF1cmFudHMgPSB1cGdyYWRlRGIuY3JlYXRlT2JqZWN0U3RvcmUoJ3Jlc3RhdXJhbnRzJywge1xyXG4gICAgICBrZXlQYXRoOiAnaWQnLFxyXG4gICAgfSk7XHJcbiAgICBzdG9yZVJlc3RhdXJhbnRzLmNyZWF0ZUluZGV4KCdyZXN0LWlkJywgJ2lkJyk7XHJcbiAgICB2YXIgc3RvcmVSZXZpZXdzID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKCdyZXZpZXdzJywge1xyXG4gICAgICBrZXlQYXRoOiAnaWQnLFxyXG4gICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICBzdG9yZVJldmlld3MuY3JlYXRlSW5kZXgoJ3Jlc3RhdXJhbnRfaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXN0YXVyYW50X2lkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHVuaXF1ZTogZmFsc2UgfSk7XHJcbiAgICB2YXIgc3RvcmVTeW5jUmV2aWV3ID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKCdzeW5jLXJldmlld3MnLCB7XHJcbiAgICAgIGtleVBhdGg6ICdpZCcsXHJcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIHN0b3JlU3luY1Jldmlldy5jcmVhdGVJbmRleCgncmVzdGF1cmFudF9pZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3RhdXJhbnRfaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdW5pcXVlOiBmYWxzZSB9KTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGFsbCByZXN0YXVyYW50cy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50cyhjYWxsYmFjaykge1xyXG5cclxuICAgIC8vIGdldCByZXN0YXVyYW50cyBmcm9tIGluZGV4ZWREQlxyXG4gICAgREJIZWxwZXIub3BlbkRhdGFiYXNlKCkudGhlbihmdW5jdGlvbiAoZGIpIHtcclxuICAgICAgaWYgKCFkYikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGRiLnRyYW5zYWN0aW9uKCdyZXN0YXVyYW50cycsICdyZWFkd3JpdGUnKVxyXG4gICAgICAgICAgICAgICAgIC5vYmplY3RTdG9yZSgncmVzdGF1cmFudHMnKVxyXG4gICAgICAgICAgICAgICAgIC5nZXRBbGwoKTtcclxuICAgICAgfVxyXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzdGF1cmFudHMpIHtcclxuICAgICAgaWYgKHJlc3RhdXJhbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50cyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmZXRjaChEQkhlbHBlci5SRVNUQVVSQU5UX1VSTClcclxuICAgIC50aGVuKFxyXG4gICAgICBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaCBJc3N1ZSAtIFN0YXR1cyBDb2RlOiAnICsgcmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChyZXN0YXVyYW50cykge1xyXG5cclxuICAgICAgICAgIC8qIEFkZCByZXN0YXVyYW50cyB0byBpbmRleGVkREIgKi9cclxuICAgICAgICAgIERCSGVscGVyLm9wZW5EYXRhYmFzZSgpLnRoZW4oZnVuY3Rpb24gKGRiKSB7XHJcbiAgICAgICAgICAgIGlmICghZGIpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGV0IHR4ID0gZGIudHJhbnNhY3Rpb24oJ3Jlc3RhdXJhbnRzJywgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgICAgICAgIGxldCBzdG9yZVJlc3RhdXJhbnRzID0gdHgub2JqZWN0U3RvcmUoJ3Jlc3RhdXJhbnRzJyk7XHJcblxyXG4gICAgICAgICAgICAgIHJlc3RhdXJhbnRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3RhdXJhbnQpIHtcclxuICAgICAgICAgICAgICAgIHN0b3JlUmVzdGF1cmFudHMucHV0KHJlc3RhdXJhbnQpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gdHguY29tcGxldGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnRzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0ZldGNoIEVycm9yOiAnLCBlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhIHJlc3RhdXJhbnQgYnkgaXRzIElELlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCBjYWxsYmFjaykge1xyXG4gICAgLy8gZmV0Y2ggYWxsIHJlc3RhdXJhbnRzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCByZXN0YXVyYW50ID0gcmVzdGF1cmFudHMuZmluZChyID0+IHIuaWQgPT0gaWQpO1xyXG4gICAgICAgIGlmIChyZXN0YXVyYW50KSB7IC8vIEdvdCB0aGUgcmVzdGF1cmFudFxyXG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gUmVzdGF1cmFudCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZGF0YWJhc2VcclxuICAgICAgICAgIGNhbGxiYWNrKCdSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0JywgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUoY3Vpc2luZSwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50cyAgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmlsdGVyIHJlc3RhdXJhbnRzIHRvIGhhdmUgb25seSBnaXZlbiBjdWlzaW5lIHR5cGVcclxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xyXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIG5laWdoYm9yaG9vZFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSBhbmQgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50cztcclxuICAgICAgICBpZiAoY3Vpc2luZSAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxyXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmVpZ2hib3Job29kICE9ICdhbGwnKSB7IC8vIGZpbHRlciBieSBuZWlnaGJvcmhvb2RcclxuICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIubmVpZ2hib3Job29kID09IG5laWdoYm9yaG9vZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXHJcbiAgICAgICAgY29uc3QgbmVpZ2hib3Job29kcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0ubmVpZ2hib3Job29kKTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBuZWlnaGJvcmhvb2RzXHJcbiAgICAgICAgY29uc3QgdW5pcXVlTmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHMuZmlsdGVyKCh2LCBpKSA9PiBuZWlnaGJvcmhvb2RzLmluZGV4T2YodikgPT0gaSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlTmVpZ2hib3Job29kcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIGN1aXNpbmVzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBjdWlzaW5lcyBmcm9tIGFsbCByZXN0YXVyYW50c1xyXG4gICAgICAgIGNvbnN0IGN1aXNpbmVzID0gcmVzdGF1cmFudHMubWFwKCh2LCBpKSA9PiByZXN0YXVyYW50c1tpXS5jdWlzaW5lX3R5cGUpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlcyBmcm9tIGN1aXNpbmVzXHJcbiAgICAgICAgY29uc3QgdW5pcXVlQ3Vpc2luZXMgPSBjdWlzaW5lcy5maWx0ZXIoKHYsIGkpID0+IGN1aXNpbmVzLmluZGV4T2YodikgPT0gaSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlQ3Vpc2luZXMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAgICogRmV0Y2ggYWxsIHJldmlld3MuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmZXRjaFJldmlld3MoaWQsIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAvLyBnZXQgcmV2aWV3cyBmcm9tIGluZGV4ZWREQlxyXG4gICAgICBEQkhlbHBlci5vcGVuRGF0YWJhc2UoKS50aGVuKGZ1bmN0aW9uIChkYikge1xyXG4gICAgICAgIGlmICghZGIpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9ICBlbHNlIHtcclxuICAgICAgICAgIGxldCBzdG9yZVJldmlld3MgPSBkYi50cmFuc2FjdGlvbigncmV2aWV3cycsICdyZWFkd3JpdGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKCdyZXZpZXdzJyk7XHJcbiAgICAgICAgICBsZXQgcmVzdEluZGV4ID0gc3RvcmVSZXZpZXdzLmluZGV4KCdyZXN0YXVyYW50X2lkJyk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdEluZGV4LmdldEFsbChwYXJzZUludChpZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmV2aWV3cykge1xyXG4gICAgICAgIGlmIChyZXZpZXdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJldmlld3MpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qIEZldGNoIHJldmlld3MgZnJvbSBuZXR3b3JrICovXHJcbiAgICAgIGZldGNoKGAke0RCSGVscGVyLlJFVklFV1NfVVJMfSR7aWR9YClcclxuICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAgICAgIC50aGVuKHJldmlld3MgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIEFkZCByZXZpZXdzIHRvIGluZGV4ZWREQiAqL1xyXG4gICAgICAgICAgICAgICAgREJIZWxwZXIub3BlbkRhdGFiYXNlKCkudGhlbihmdW5jdGlvbiAoZGIpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFkYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHggPSBkYi50cmFuc2FjdGlvbigncmV2aWV3cycsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RvcmVSZXZpZXdzID0gdHgub2JqZWN0U3RvcmUoJ3Jldmlld3MnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV2aWV3cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHN0b3JlUmV2aWV3cy5wdXQocmV2aWV3KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR4LmNvbXBsZXRlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXZpZXdzKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNhbGxiYWNrKGBSZXF1ZXN0IGZhaWxlZC4gUmV0dXJuZWQgJHtlcnJvcn1gLCBudWxsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZldGNoVG1wUmV2aWV3cyhpZCwgY2FsbGJhY2spIHtcclxuXHJcbiAgICAgIC8vIGdldCByZXZpZXdzIGZyb20gaW5kZXhlZERCXHJcbiAgICAgIERCSGVscGVyLm9wZW5EYXRhYmFzZSgpLnRoZW4oZnVuY3Rpb24gKGRiKSB7XHJcbiAgICAgICAgaWYgKCFkYikge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gIGVsc2Uge1xyXG4gICAgICAgICAgbGV0IHN0b3JlUmV2aWV3cyA9IGRiLnRyYW5zYWN0aW9uKCdzeW5jLXJldmlld3MnLCAncmVhZG9ubHknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKCdzeW5jLXJldmlld3MnKTtcclxuICAgICAgICAgIGxldCByZXN0SW5kZXggPSBzdG9yZVJldmlld3MuaW5kZXgoJ3Jlc3RhdXJhbnRfaWQnKTtcclxuICAgICAgICAgIHJldHVybiByZXN0SW5kZXguZ2V0QWxsKHBhcnNlSW50KGlkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXZpZXdzKSB7XHJcbiAgICAgICAgaWYgKHJldmlld3MubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmV2aWV3cyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUG9zdCByZXZpZXdzIHRvIERCXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwb3N0UmV2aWV3KHJldmlldykge1xyXG4gICAgICByZXR1cm4gREJIZWxwZXIub3BlbkRhdGFiYXNlKCkudGhlbihmdW5jdGlvbiAoZGIpIHtcclxuICAgICAgICBpZiAoIWRiKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCB0eCA9IGRiLnRyYW5zYWN0aW9uKCdzeW5jLXJldmlld3MnLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICBsZXQgc3RvcmVSZXZpZXdzID0gdHgub2JqZWN0U3RvcmUoJ3N5bmMtcmV2aWV3cycpO1xyXG5cclxuICAgICAgICAgIHN0b3JlUmV2aWV3cy5wdXQocmV2aWV3KTtcclxuICAgICAgICAgIHJldHVybiB0eC5jb21wbGV0ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdG9nZ2xlRmF2b3JpdGUocmVzdGF1cmFudElkLCB0b2dnbGVWYWx1ZSkge1xyXG4gIHJldHVybiBEQkhlbHBlci5vcGVuRGF0YWJhc2UoKS50aGVuKGZ1bmN0aW9uIChkYikge1xyXG4gICAgaWYgKCFkYikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZXQgc3RvcmVSZXN0YXVyYW50cyA9IGRiLnRyYW5zYWN0aW9uKCdyZXN0YXVyYW50cycsICdyZWFkd3JpdGUnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9iamVjdFN0b3JlKCdyZXN0YXVyYW50cycpO1xyXG4gICAgICBsZXQgcmVzdGF1cmFudEluZGV4ID0gc3RvcmVSZXN0YXVyYW50cy5pbmRleCgncmVzdC1pZCcpO1xyXG4gICAgICByZXR1cm4gcmVzdGF1cmFudEluZGV4Lm9wZW5DdXJzb3IoKTtcclxuICAgIH1cclxuICB9KS50aGVuKGZ1bmN0aW9uIHVwZGF0ZUZhdm9yaXRlKGN1cnNvcikge1xyXG5cclxuICAgIHJlc3RhdXJhbnRJZCA9ICtyZXN0YXVyYW50SWQ7XHJcblxyXG4gICAgaWYgKCFjdXJzb3IpIHJldHVybjtcclxuXHJcbiAgICBpZiAoY3Vyc29yLnZhbHVlLmlkID09PSByZXN0YXVyYW50SWQpIHtcclxuICAgICAgdmFyIHVwZGF0ZURhdGEgPSBjdXJzb3IudmFsdWU7XHJcblxyXG4gICAgICB1cGRhdGVEYXRhLmlzX2Zhdm9yaXRlID0gdG9nZ2xlVmFsdWU7XHJcbiAgICAgIHZhciByZXF1ZXN0ID0gY3Vyc29yLnVwZGF0ZSh1cGRhdGVEYXRhKTtcclxuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gY3Vyc29yLmNvbnRpbnVlKCkudGhlbih1cGRhdGVGYXZvcml0ZSk7XHJcblxyXG4gIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgY29uc3QgdXJsID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MTMzNy9yZXN0YXVyYW50cy8ke3Jlc3RhdXJhbnRJZH0vP2lzX2Zhdm9yaXRlPSR7dG9nZ2xlVmFsdWV9YDtcclxuXHJcbiAgICAgIGZldGNoKHVybCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKClcclxuICAgICAgKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmV0Y2hpbmcgaXNfZmF2b3JpdGU6ICcgKyBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuICAvKipcclxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxyXG4gICAqL1xyXG4gIHN0YXRpYyB1cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIHJldHVybiAoYC4vcmVzdGF1cmFudC5odG1sP2lkPSR7cmVzdGF1cmFudC5pZH1gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgaW1hZ2UgVVJMLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xyXG4gICAgcmV0dXJuIChgL2ltZy8ke3Jlc3RhdXJhbnQucGhvdG9ncmFwaH0ud2VicGApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAqIFJlc3RhdXJhbnQgcmVzcG9uc2l2ZSBpbWFnZXMgc291cmNlIHNldC5cclxuICovXHJcbnN0YXRpYyBpbWFnZVJlc3BvbnNpdmVVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIGNvbnN0IHNjYWxlMXggPSAnMzIwJztcclxuICAgIGNvbnN0IHNjYWxlMV81eCA9ICc0ODAnO1xyXG4gICAgY29uc3Qgc2NhbGUyeCA9ICc2NDAnO1xyXG4gICAgY29uc3Qgc2NhbGUzeCA9ICc4MDAnO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgYC9pbWdfcmVzcG9uc2l2ZS8ke3Jlc3RhdXJhbnQuaWR9LSR7c2NhbGUxeH0ud2VicCAke3NjYWxlMXh9dyxcclxuICAgICAgICAvaW1nX3Jlc3BvbnNpdmUvJHtyZXN0YXVyYW50LmlkfS0ke3NjYWxlMV81eH0ud2VicCAke3NjYWxlMV81eH13LFxyXG4gICAgICAgIC9pbWdfcmVzcG9uc2l2ZS8ke3Jlc3RhdXJhbnQuaWR9LSR7c2NhbGUyeH0ud2VicCAke3NjYWxlMnh9dyxcclxuICAgICAgICAvaW1nX3Jlc3BvbnNpdmUvJHtyZXN0YXVyYW50LmlkfS0ke3NjYWxlM3h9LndlYnAgJHtzY2FsZTN4fXdgKTtcclxufVxyXG5cclxuICAvKipcclxuICAgKiBNYXAgbWFya2VyIGZvciBhIHJlc3RhdXJhbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIG1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWFwKSB7XHJcbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgcG9zaXRpb246IHJlc3RhdXJhbnQubGF0bG5nLFxyXG4gICAgICB0aXRsZTogcmVzdGF1cmFudC5uYW1lLFxyXG4gICAgICB1cmw6IERCSGVscGVyLnVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCksXHJcbiAgICAgIG1hcDogbWFwLFxyXG4gICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbWFya2VyO1xyXG4gIH1cclxuXHJcbn1cclxuIiwibGV0IHJlc3RhdXJhbnQ7XHJcbnZhciBtYXA7XHJcblxyXG4vKlxyXG5TZXR0aW5nIHBob3RvZ3JhcGhzIGFsdHMqL1xyXG5cclxuY29uc3QgcGhvdG9ncmFwaEFsdHMgPSB7XHJcblx0MTogXCJTZXJldmFsIGdyb3VwcyBvZiBwZW9wbGUgaGF2aW5nIHF1YWxpdHkgdGltZSBhdCBhIHJlc3RhdXJhbnQuXCIsXHJcblx0MjogXCJBIGxvdmVseSBtYXJnZXJpdHRhIHBpenphXCIsXHJcblx0MzogXCJBbiBlbXB0eSByZXN0YXVyYW50IHNldHRpbmcgd2hpY2ggaGFzIGhlYXRlcnNcIixcclxuXHQ0OiBcIkEgY29ybmVyIHNob3Qgb2YgdGhlIG91dHNpZGUgb2YgdGhlIHJlc3RhdXJhdC5cIixcclxuXHQ1OiBcIkEgY3Jvd2RlZCByZXN0YXVyYW50IGFuZCBzdGFmZiBzZXJ2aW5nIGZvb2QgZnJvbSBiZWhpbmQgdGhlIGJhci5cIixcclxuXHQ2OiBcIlJlc3RhdXJhbnQgd2l0aCB3b29kZW4gdGFibGVzLCBjaGFyaXMsIGFuZCBhIFVTIGZsYWcgYXMgYSB3YWxsIGRlY29yYXRpb25cIixcclxuXHQ3OiBcImEgZG9nIHdhdGNoaW5nIGZyb20gdGhlIG91dHNpZGUgb2YgYSBjcm93ZGVkIGJ1cmdlciBzaG9wLCBhY2NvbXBhbmllZCBieSB0d28gbWVuLlwiLFxyXG5cdDg6IFwiQ2xvc2UgdXAgb2YgdGhlIGR1dGNoIHJlc3RhdXJhbnQgbG9nbyBiZXNpZGUgYSBmbG93ZXJpbmcgdHJlZVwiLFxyXG5cdDk6IFwiQmxhY2sgYW5kIHdoaXRlIHBpY3R1cmUgb2YgcGVvcGxlIGVhdGluZyBhdCBhbiBhc2lhbiByZXN0YXVyYXQuXCIsXHJcblx0MTA6IFwiRW1wdHkgcmVzdGF1cmFudCdzIHdoaXRlIGNoYWlycywgd2FsbHMgYW5kIGNlaWxpbmdzLlwiXHJcbn07XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICAgICAgem9vbTogMTYsXHJcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcclxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XHJcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG5TaG93IG1hcCBidXR0b25cclxuKi9cclxuY2FsbE1hcCA9XHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBUb2dnbGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgaWYgKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkpID09PSAnYmxvY2snKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB3aW5kb3cuaW5pdE1hcCgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIH1cclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXHJcbiAqL1xyXG5mZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gKGNhbGxiYWNrKSA9PiB7XHJcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkgeyAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcclxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XHJcbiAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcclxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xyXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcclxuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcclxuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xyXG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2V0IHRoZSBmYXZvcml0ZSByZXN0YXVyYW50IGxheW91dFxyXG4gKi9cclxudG9nZ2xlRmF2b3JpdGUgPSAocmVzdElkKSA9PiB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpc0Zhdm9yaXRlJyk7XHJcbiAgY29uc3Qgc2V0VG9nZ2xlID0gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZhcicpO1xyXG4gIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnZmFyJyk7XHJcbiAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdmYXMnKTtcclxuICBEQkhlbHBlci50b2dnbGVGYXZvcml0ZShyZXN0SWQsIHNldFRvZ2dsZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcblx0Y29uc3QgZmF2b3JpdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXNGYXZvcml0ZScpO1xyXG5cdGNvbnN0IGlzRmF2b3JpdGUgPSByZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09ICd0cnVlJyA/ICdmYXMnIDogJ2Zhcic7XHJcblx0ZmF2b3JpdGUuY2xhc3NMaXN0LnJlbW92ZSgnZmFyJyk7XHJcblx0ZmF2b3JpdGUuY2xhc3NMaXN0LmFkZChgJHtpc0Zhdm9yaXRlfWApO1xyXG5cdGlmIChyZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09ICd0cnVlJykge1xyXG5cdGZhdm9yaXRlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBVbm1hcmsgJHtyZXN0YXVyYW50Lm5hbWV9IGFzIGZhdm9yaXRlYCk7XHJcblx0fSBlbHNlIHtcclxuXHRmYXZvcml0ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgTWFyayAke3Jlc3RhdXJhbnQubmFtZX0gYXMgZmF2b3JpdGVgKTtcclxuXHR9XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJyk7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJ1xyXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuXHRpbWFnZS5zcmNzZXQgPSBEQkhlbHBlci5pbWFnZVJlc3BvbnNpdmVVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG4gIGltYWdlLmFsdCA9IHBob3RvZ3JhcGhBbHRzW3Jlc3RhdXJhbnQuaWRdO1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xyXG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XHJcblxyXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXHJcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XHJcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xyXG4gIH1cclxuICAvLyBmaWxsIHJldmlld3NcclxuICBmaWxsUmV2aWV3c0hUTUwoKTtcclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xyXG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcclxuXHRob3Vycy5pbm5lckhUTUwgPSAnJztcclxuICBmb3IgKGxldCBrZXkgaW4gb3BlcmF0aW5nSG91cnMpIHtcclxuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcblxyXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XHJcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcclxuXHJcbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcclxuICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcclxuXHJcbiAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXZpZXdzSFRNTCA9IChyZXN0YXVyYW50SWQgPSBzZWxmLnJlc3RhdXJhbnQuaWQpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaFJldmlld3MocmVzdGF1cmFudElkLCAoZXJyb3IsIHJldmlld3MpID0+IHtcclxuICAgIGlmKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xyXG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzx1bCBpZD1cInJldmlld3MtbGlzdFwiPjwvdWw+JztcclxuICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xyXG4gICAgICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XHJcbiAgICAgIHRpdGxlLnRhYkluZGV4ID0gJzAnO1xyXG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICAgICAgaWYgKCFyZXZpZXdzKSB7XHJcbiAgICAgICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xyXG4gICAgICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcclxuICAgICAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xyXG4gICAgICB9KTtcclxuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcclxuICAgICAgZmlsbFRtcFJldmlld3NIVE1MKCk7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgZnVuY3Rpb24gKGUpIHtcclxuICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKGZ1bmN0aW9uIChzd1JlZ2lzdHJhdGlvbikge1xyXG4gICAgc3dSZWdpc3RyYXRpb24uc3luYy5yZWdpc3RlcignbXlGaXJzdFN5bmMnKTtcclxuICB9KTtcclxufSwgZmFsc2UpO1xyXG5cclxuZmlsbFRtcFJldmlld3NIVE1MID0gKHJlc3RhdXJhbnRJZCA9IHNlbGYucmVzdGF1cmFudC5pZCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoVG1wUmV2aWV3cyhyZXN0YXVyYW50SWQsIChlcnJvciwgcmV2aWV3cykgPT4ge1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcclxuICAgICAgY29uc3QgdG1wcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RtcCcpO1xyXG4gICAgICBpZiAodG1wcy5sZW5ndGggPT09IDApIHsgLy8gbWl0aWdhdGUgZG91YmxlIGFkZHNcclxuICAgICAgICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcclxuICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVRtcFJldmlld0hUTUwocmV2aWV3KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcblxyXG4vKipcclxuICogSGFubGRpbmcgZm9ybSBzdWJtaXRpb25cclxuICovXHJcbiBhZGRSZXZpZXcgPSAoKSA9PiB7XHJcbiAgIGNvbnN0IHJldmlldyA9IHtcclxuICAgIHJlc3RhdXJhbnRfaWQ6IHNlbGYucmVzdGF1cmFudC5pZCxcclxuICAgIG5hbWU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJykudmFsdWUsXHJcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgIHJhdGluZzogK2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmcnKS52YWx1ZSxcclxuICAgIGNvbW1lbnRzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHMnKS52YWx1ZSxcclxuICB9O1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xyXG4gIHVsLmluc2VydEJlZm9yZShjcmVhdGVSZXZpZXdIVE1MKHJldmlldyksIHVsLmNoaWxkTm9kZXNbMF0pO1xyXG4gIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgYWxlcnQoJ1lvdSBhcmUgY3VycmVudGx5IG9mZmxpbmUuIFlvdXIgcmV2aWV3IHdpbGwgYmUgcG9zdGVkIG9uY2UgeW91IGFyZSBvbmxpbmUgYWdhaW4uIFRoYW5rIHlvdSBmb3IgcmV2aWV3aW5nIScpO1xyXG4gIH1cclxuICBEQkhlbHBlci5wb3N0UmV2aWV3KHJldmlldykudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihmdW5jdGlvbiAoc3dSZWdpc3RyYXRpb24pIHtcclxuICAgIHN3UmVnaXN0cmF0aW9uLnN5bmMucmVnaXN0ZXIoJ215Rmlyc3RTeW5jJyk7XHJcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICB9KTtcclxufSkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgZmlsbFJldmlld3NIVE1MKCk7XHJcbn0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gIGZpbGxUbXBSZXZpZXdzSFRNTCgpO1xyXG59KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgY29uc29sZS5lcnJvcihlcnIpO1xyXG59KTtcclxufTtcclxuXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXctZm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgYWRkUmV2aWV3KCk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXZpZXcgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuY3JlYXRlUmV2aWV3SFRNTCA9IChyZXZpZXcpID0+IHtcclxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgbGkudGFiSW5kZXggPSAnMCc7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNScpO1xyXG4gIGNvbnN0IG15X2RhdGUgPSBuZXcgRGF0ZShyZXZpZXcuY3JlYXRlZEF0KTtcclxuICBkYXRlLmlubmVySFRNTCA9IG15X2RhdGUudG9EYXRlU3RyaW5nKCk7XHJcbiAgbGkuYXBwZW5kQ2hpbGQoZGF0ZSk7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XHJcbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XHJcblx0cmF0aW5nLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHJldmlldy5yYXRpbmcgPT09IDUgPyAnZ3JlZW4nIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3LnJhdGluZyA+IDIgPyAnb3JhbmdlJyA6ICdyZWQnO1xyXG4gIGxpLmFwcGVuZENoaWxkKHJhdGluZyk7XHJcblxyXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcclxuICBsaS5hcHBlbmRDaGlsZChjb21tZW50cyk7XHJcblxyXG4gIGNvbnN0IGxhYmVsID0gYCR7cmV2aWV3Lm5hbWV9IHNhaWQgJHtyZXZpZXcuY29tbWVudHN9IGFuZCByYXRlZCB0aGUgcmVzdGF1cmFudCAke3Jldmlldy5yYXRpbmd9IG91dCBvZiA1YDtcclxuICBsaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBsYWJlbCk7XHJcblxyXG4gIHJldHVybiBsaTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBUTVAgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNyZWF0ZVRtcFJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIGxpLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndG1wJyk7XHJcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncmV2aWV3LWhlYWRlcicpO1xyXG4gIGxpLmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gIG5hbWUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyZXZpZXdOYW1lJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcclxuICBkaXYuYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNScpO1xyXG4gIGRhdGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyZXZpZXdEYXRlJyk7XHJcbiAgY29uc3QgZGF0ZU9wdGlvbnMgPSB7IHdlZWtkYXk6ICdsb25nJywgeWVhcjogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCBkYXk6ICdudW1lcmljJyB9O1xyXG4gIGRhdGUuaW5uZXJIVE1MID0gKG5ldyBEYXRlKHJldmlldy5jcmVhdGVkQXQpKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgZGF0ZU9wdGlvbnMpO1xyXG4gIGRpdi5hcHBlbmRDaGlsZChkYXRlKTtcclxuXHJcbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcclxuICByYXRpbmcuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyZXZpZXdSYXRpbmcnKTtcclxuICByYXRpbmcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcmV2aWV3LnJhdGluZyA9PT0gNSA/ICdncmVlbicgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXcucmF0aW5nID4gMiA/ICdvcmFuZ2UnIDogJ3JlZCc7XHJcbiAgbGkuYXBwZW5kQ2hpbGQocmF0aW5nKTtcclxuXHJcbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xyXG4gIGNvbW1lbnRzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncmV2aWV3Q29tbWVudCcpO1xyXG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcclxuXHJcbiAgcmV0dXJuIGxpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XHJcbiAqL1xyXG5maWxsQnJlYWRjcnVtYiA9IChyZXN0YXVyYW50PXNlbGYucmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xyXG5cdGNvbnN0IGJyZWFkY3J1bWJFbGVtZW50cyA9IGJyZWFkY3J1bWIucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcclxuXHRmb3IgKGVsZW1lbnQgb2YgYnJlYWRjcnVtYkVsZW1lbnRzKSB7XHJcblx0ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcpO1xyXG59XHJcblx0Y29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cdGxpLnNldEF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50JywgJ3BhZ2UnKTtcclxuXHRpZiAoYnJlYWRjcnVtYi5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMikgcmV0dXJuO1xyXG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXHJcbiAqL1xyXG5nZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XHJcbiAgaWYgKCF1cmwpXHJcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnXFxcXCQmJyk7XHJcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXHJcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xyXG4gIGlmICghcmVzdWx0cylcclxuICAgIHJldHVybiBudWxsO1xyXG4gIGlmICghcmVzdWx0c1syXSlcclxuICAgIHJldHVybiAnJztcclxuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xyXG59XHJcblxyXG4vL2V2ZW50bGlzdGVuZXJzIGZvciBmYXZvcml0ZSB0b2dnbGVcclxuXHJcbmNvbnN0IGZhdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpc0Zhdm9yaXRlJyk7XHJcbmZhdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB0b2dnbGVGYXZvcml0ZShzZWxmLnJlc3RhdXJhbnQuaWQpO1xyXG59KTtcclxuZmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gIGlmIChlLmtleUNvZGUgPT09IDEzKSB7IC8vID0gZW50ZXIga2V5XHJcbiAgICB0b2dnbGVGYXZvcml0ZShzZWxmLnJlc3RhdXJhbnQuaWQpO1xyXG4gIH1cclxufSk7XHJcblxyXG5cclxuaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSB7XHJcbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3N3LmpzJylcclxuICAgIC50aGVuKCgpID0+IGNvbnNvbGUubG9nKCdQYXNzZWQgVGVzdCcpKVxyXG59O1xyXG4iLCJcclxuLyoqXHJcbiAqIFJlZ2lzdGVyIGEgc2VydmljZVdvcmtlclxyXG4gKi9cclxucmVnaXN0ZXJTZXJ2aWNlV29ya2VyID0gKCkgPT4ge1xyXG4gICAgLy9jaGVjayBpZiBzZXJ2aWNlV29ya2VyIGlzIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIHJldHVyblxyXG4gICAgaWYgKCFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikgcmV0dXJuO1xyXG5cclxuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvc3cuanMnKS5jYXRjaChmdW5jdGlvbigpe1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBTZXJ2aWNlV29ya2VyIG5vdCByZWdpc3RlcmVkXCIpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XHJcbiIsInZhciB2dWUgPSBuZXcgVnVlKHtcclxuICBlbDogJyNhcHAnLFxyXG4gIGRhdGE6IHtcclxuICAgIGZvcm1PcGVuOiBmYWxzZSxcclxuICAgIHJldmlldzoge1xyXG4gICAgICBuYW1lOiAnJyxcclxuICAgICAgcmF0aW5nOiAnJyxcclxuICAgICAgY29tbWVudHM6JydcclxuICAgIH1cclxuICB9LFxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLnJldmlldyA9IHtcclxuICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICByYXRpbmc6ICcnLFxyXG4gICAgICAgIGNvbW1lbnRzOicnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmZvcm1PcGVuID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucmVzZXRGb3JtKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59KVxyXG4iXX0=
